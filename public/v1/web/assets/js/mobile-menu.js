/*!
 * Mobile Menu
 * Copyright 2011-2016
 * Licensed under the MIT license
 */
!function(e){"use strict";function n(){var n=jQuery("body").innerWidth();n+=function(){var e=jQuery('<div style="width: 100%; height:200px;">test</div>'),n=jQuery('<div style="width:200px;height:150px; position: absolute; top: 0; left: 0; visibility: hidden; overflow:hidden;"></div>').append(e),t=e[0],a=n[0];jQuery("body").append(a);var r=t.offsetWidth;n.css("overflow","scroll");var u=a.clientWidth;return n.remove(),r-u}(),e(".gnash-menu-wapper.horizontal .item-megamenu").length>0&&n>991&&e(".gnash-menu-wapper.horizontal .item-megamenu").each(function(){var n=e(this),t=n.children(".megamenu").data("responsive"),a=n.closest(".gnash-menu-wapper");""!==t&&(a=n.closest(t)),function(n,t){if("undefined"!==n){var a=0,r=n.offset();void 0!==r&&(a=n.innerWidth(),setTimeout(function(){e(t).children(".megamenu").css({"max-width":a+"px"});var n=e(t).children(".megamenu").outerWidth(),u=e(t).outerWidth();e(t).children(".megamenu").css({left:"-"+(n/2-u/2)+"px"});var d=r.left,l=d+a,i=e(t).offset().left,s=n/2>i-d,p=n/2+i>l;if(s){var m=i-d;e(t).children(".megamenu").css({left:-m+"px"})}p&&!s&&(m=i-d,m-=a-n,e(t).children(".megamenu").css({left:-m+"px"}))},100))}}(a,n)})}function t(){e(".gnash-menu-wapper.vertical.support-mega-menu").each(function(){var n=e(this).offset(),t=parseInt(e(this).actual("width"),10),a=n.left+t;e(this).find(".megamenu").each(function(){var r=e(this).data("responsive"),u=e(".container");""!==r&&(u=e(this).closest(r));var d=parseInt(u.innerWidth(),10)-30,l=u.offset(),i=l.left+d,s=d-t;(n.left>i||a<l.left)&&(s=d),a>i&&(s=d-(t-(a-i))-30),s>0&&e(this).css("max-width",s+"px")})})}function a(){!e(".gnash-menu-clone-wrap").length&&e(".gnash-clone-mobile-menu").length>0&&e("body").prepend('<div class="gnash-menu-clone-wrap"><div class="gnash-menu-panels-actions-wrap"><span class="gnash-menu-current-panel-title">MENU</span><a class="gnash-menu-close-btn gnash-menu-close-panels" href="#">x</a></div><div class="gnash-menu-panels"></div></div>');Array();e(".gnash-menu-clone-wrap .gnash-menu-panels #gnash-menu-panel-main").length||e(".gnash-menu-clone-wrap .gnash-menu-panels").append('<div id="gnash-menu-panel-main" class="gnash-menu-panel gnash-menu-panel-main"><ul class="depth-01"></ul></div>'),e(".gnash-clone-mobile-menu").each(function(){var n=e(this),t=n.attr("id");if(!e("#"+("gnash-menu-clone-"+t)).length){var a=n.clone(!0);a.find(".menu-item").addClass("clone-menu-item"),a.find("[id]").each(function(){a.find('.vc_tta-panel-heading a[href="#'+e(this).attr("id")+'"]').attr("href","#"+r(e(this).attr("id"),"gnash-menu-clone-")),a.find('.gnash-menu-tabs .tabs-link a[href="#'+e(this).attr("id")+'"]').attr("href","#"+r(e(this).attr("id"),"gnash-menu-clone-")),e(this).attr("id",r(e(this).attr("id"),"gnash-menu-clone-"))}),a.find(".gnash-menu-menu").addClass("gnash-menu-menu-clone");var u=e(".gnash-menu-clone-wrap .gnash-menu-panels #gnash-menu-panel-main ul");u.append(a.html()),function n(t,a){t.find(".menu-item-has-children").length&&t.find(".menu-item-has-children").each(function(){var t=e(this);n(t,a);for(var r="gnash-menu-panel-"+a;e("#"+r).length;)r="gnash-menu-panel-"+ ++a;t.prepend('<a class="gnash-menu-next-panel" href="#'+r+'" data-target="#'+r+'"></a>');var u=e("<div>").append(t.find("> .submenu").clone()).html();t.find("> .submenu").remove(),e(".gnash-menu-clone-wrap .gnash-menu-panels").append('<div id="'+r+'" class="gnash-menu-panel gnash-menu-sub-panel gnash-menu-hidden">'+u+"</div>")})}(u,0)}})}function r(e,n){return n+e}function u(){e(document).on("click",".menu-toggle",function(){return e(".gnash-menu-clone-wrap").addClass("open"),!1}),e(document).on("click",".gnash-menu-clone-wrap .gnash-menu-close-panels",function(){return e(".gnash-menu-clone-wrap").removeClass("open"),!1}),e(document).on("click",function(n){e("body").hasClass("rtl")?n.offsetX<0&&e(".gnash-menu-clone-wrap").removeClass("open"):n.offsetX>e(".gnash-menu-clone-wrap").width()&&e(".gnash-menu-clone-wrap").removeClass("open")})}e(document).on("click",".gnash-menu-next-panel",function(n){var t=e(this),a=t.closest(".menu-item"),r=t.closest(".gnash-menu-panel"),u=t.attr("href");if(e(u).length){r.addClass("gnash-menu-sub-opened"),e(u).addClass("gnash-menu-panel-opened").removeClass("gnash-menu-hidden").attr("data-parent-panel",r.attr("id"));var d=a.find(".gnash-menu-item-title").attr("title"),l="";e(".gnash-menu-panels-actions-wrap .gnash-menu-current-panel-title").length>0&&(l=e(".gnash-menu-panels-actions-wrap .gnash-menu-current-panel-title").html()),void 0!==d&&0!=typeof d?(e(".gnash-menu-panels-actions-wrap .gnash-menu-current-panel-title").length||e(".gnash-menu-panels-actions-wrap").prepend('<span class="gnash-menu-current-panel-title"></span>'),e(".gnash-menu-panels-actions-wrap .gnash-menu-current-panel-title").html(d)):e(".gnash-menu-panels-actions-wrap .gnash-menu-current-panel-title").remove(),e(".gnash-menu-panels-actions-wrap .gnash-menu-prev-panel").remove(),e(".gnash-menu-panels-actions-wrap").prepend('<a data-prenttitle="'+l+'" class="gnash-menu-prev-panel" href="#'+r.attr("id")+'" data-cur-panel="'+u+'" data-target="#'+r.attr("id")+'"></a>')}n.preventDefault()}),e(document).on("click",".gnash-menu-prev-panel",function(n){var t=e(this),a=t.attr("data-cur-panel"),r=t.attr("href");e(a).removeClass("gnash-menu-panel-opened").addClass("gnash-menu-hidden"),e(r).addClass("gnash-menu-panel-opened").removeClass("gnash-menu-sub-opened");var u=e(r).attr("data-parent-panel");if(void 0===u||!1===typeof u)e(".gnash-menu-panels-actions-wrap .gnash-menu-prev-panel").remove(),e(".gnash-menu-panels-actions-wrap .gnash-menu-current-panel-title").html("MAIN MENU");else{e(".gnash-menu-panels-actions-wrap .gnash-menu-prev-panel").attr("href","#"+u).attr("data-cur-panel",r).attr("data-target","#"+u);var d=e("#"+u).find('.gnash-menu-next-panel[data-target="'+r+'"]').closest(".menu-item").find(".gnash-menu-item-title").attr("data-title");void 0!==(d=e(this).data("prenttitle"))&&!1!==typeof d?(e(".gnash-menu-panels-actions-wrap .gnash-menu-current-panel-title").length||e(".gnash-menu-panels-actions-wrap").prepend('<span class="gnash-menu-current-panel-title"></span>'),e(".gnash-menu-panels-actions-wrap .gnash-menu-current-panel-title").html(d)):e(".gnash-menu-panels-actions-wrap .gnash-menu-current-panel-title").remove()}n.preventDefault()}),e(window).on("resize",function(){n(),u(),t()}),window.addEventListener("load",function(e){n(),u(),t(),a()},!1)}(jQuery);